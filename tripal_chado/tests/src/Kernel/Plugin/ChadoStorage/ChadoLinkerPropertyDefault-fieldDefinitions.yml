##
## Used to provide file/property definitions for the tests in
## ChadoStorageFindValuesTest.php
##
## The format is as follows:
## [test method which will be using the fields]:
##   [field name]:
##      field_name: [field name]
##      base_table: [base table]
##      properties:
##        [property key]:
##           propertyType class: [full class name + namespace]
##           action: [action]
##           [additional key/value pairs associated with the action]

testPropertyField:
  testpropertyfieldA:
    field_name: testpropertyfieldA
    base_table: feature
    properties:
      # Keeps track of the feature record our hypothetical field cares about.
      record_id:
        propertyType class: Drupal\tripal_chado\TripalStorage\ChadoIntStoragePropertyType
        action: store_id
        drupal_store: TRUE,
        chado_table: feature
        chado_column: feature_id
      # Store the primary key for the prop table.
      prop_id:
        propertyType class: Drupal\tripal_chado\TripalStorage\ChadoIntStoragePropertyType
        action: store_pkey
        chado_table: featureprop
        chado_table_alias: featureprop_A
        chado_column: featureprop_id
      # Generate `JOIN {featureprop} ON feature.feature_id = featureprop.feature_id`
      # Will also store the feature.feature_id so no need for drupal_store => TRUE.
      linker_id:
        propertyType class: Drupal\tripal_chado\TripalStorage\ChadoIntStoragePropertyType
        action: store_link
        left_table: feature
        left_table_id: feature_id
        right_table: featureprop
        right_table_alias: featureprop_A
        right_table_id: feature_id
      # Now we are going to store all the core columns of the featureprop table to
      # ensure we can meet the unique and not null requirements of the table.
      type_id:
        propertyType class: Drupal\tripal_chado\TripalStorage\ChadoIntStoragePropertyType
        action: store
        chado_table: featureprop
        chado_table_alias: featureprop_A
        chado_column: type_id
      value:
        propertyType class: Drupal\tripal_chado\TripalStorage\ChadoTextStoragePropertyType
        action: store
        chado_table: featureprop
        chado_table_alias: featureprop_A
        chado_column: value
        delete_if_empty: TRUE
        empty_value: ''
      rank:
        propertyType class: Drupal\tripal_chado\TripalStorage\ChadoIntStoragePropertyType
        action: store
        chado_table: featureprop
        chado_table_alias: featureprop_A
        chado_column: rank
  testpropertyfieldB:
    field_name: testpropertyfieldB
    base_table: feature
    properties:
      record_id:
        propertyType class: Drupal\tripal_chado\TripalStorage\ChadoIntStoragePropertyType
        action: store_id
        drupal_store: TRUE
        chado_table: feature
        chado_column: feature_id
      prop_id:
        propertyType class: Drupal\tripal_chado\TripalStorage\ChadoIntStoragePropertyType
        action: store_pkey
        chado_table: featureprop
        chado_table_alias: featureprop_B
        chado_column: featureprop_id
      linker_id:
        propertyType class: Drupal\tripal_chado\TripalStorage\ChadoIntStoragePropertyType
        action: store_link
        left_table: feature
        left_table_id: feature_id
        right_table: featureprop
        right_table_alias: featureprop_B
        right_table_id: feature_id
      type_id:
        propertyType class: Drupal\tripal_chado\TripalStorage\ChadoIntStoragePropertyType
        action: store
        chado_table: featureprop
        chado_table_alias: featureprop_B
        chado_column: type_id
      value:
        propertyType class: Drupal\tripal_chado\TripalStorage\ChadoTextStoragePropertyType
        action: store
        chado_table: featureprop
        chado_table_alias: featureprop_B
        chado_column: value
        delete_if_empty: TRUE
        empty_value: ''
      rank:
        propertyType class: Drupal\tripal_chado\TripalStorage\ChadoIntStoragePropertyType
        action: store
        chado_table: featureprop
        chado_table_alias: featureprop_B
        chado_column: rank
  testotherfeaturefield:
    field_name: testotherfeaturefield
    base_table: feature
    properties:
      record_id:
        propertyType class: Drupal\tripal_chado\TripalStorage\ChadoIntStoragePropertyType
        action: store_id
        chado_table: feature
        chado_column: feature_id
      feature_type:
        propertyType class: Drupal\tripal_chado\TripalStorage\ChadoIntStoragePropertyType
        action: store
        chado_table: feature
        chado_column: type_id
      feature_organism:
        propertyType class: Drupal\tripal_chado\TripalStorage\ChadoIntStoragePropertyType
        action: store
        chado_table: feature
        chado_column: organism_id
      feature_uname:
        propertyType class: Drupal\tripal_chado\TripalStorage\ChadoVarCharStoragePropertyType
        action: store
        chado_table: feature
        chado_column: uniquename
  testBackwardsCompatiblePropertyField:
    field_name: testpropertyfieldABackwardsCompatible
    base_table: feature
    properties:
      record_id:
        propertyType class: Drupal\tripal_chado\TripalStorage\ChadoIntStoragePropertyType
        action: store_id
        drupal_store: TRUE
        chado_table: feature
        chado_column: feature_id
      prop_id:
        propertyType class: Drupal\tripal_chado\TripalStorage\ChadoIntStoragePropertyType
        action: store_pkey
        chado_table: featureprop
        chado_column: featureprop_id
      linker_id:
        propertyType class: Drupal\tripal_chado\TripalStorage\ChadoIntStoragePropertyType
        action: store_link
        chado_table: featureprop
        chado_column: feature_id
      type_id:
        propertyType class: Drupal\tripal_chado\TripalStorage\ChadoIntStoragePropertyType
        action: store
        chado_table: featureprop
        chado_column: type_id
      value:
        propertyType class: Drupal\tripal_chado\TripalStorage\ChadoTextStoragePropertyType
        action: store
        chado_table: featureprop
        chado_column: value
        delete_if_empty: TRUE
        empty_value: ''
      rank:
        propertyType class: Drupal\tripal_chado\TripalStorage\ChadoIntStoragePropertyType
        action: store
        chado_table: featureprop
        chado_column: rank
